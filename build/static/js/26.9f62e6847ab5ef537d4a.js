webpackJsonp([26],{"2rVF":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("4YfN"),n=i.n(a),r=i("YUvS"),c={components:{},props:{},data:function(){return{areaList:[],manageArea:[],province:[],city:[],provinceId:"",cityId:"",isSelect:!1}},watch:{manageArea:function(t){console.log(t)}},computed:{},methods:{initScroll:function(t){new r.default(t,{scrollY:!0,click:!0})},getArea:function(t,e){var i=this;this.cityId=t,this.$http.get("/weiXin/api/v1/common/getAreaByPid",{id:t}).then(function(t){t&&(i.areaList=t.data.data.map(function(t){return n()({},t,{oid:e})}),i.isSelect=!1)})},getProvince:function(){var t=this;this.$http.get("/weiXin/api/v1/common/getAreaByPid",{id:1}).then(function(e){e&&(t.province=e.data.data)})},getCity:function(t,e){var i=this;this.provinceId=t,this.$http.get("/weiXin/api/v1/common/getAreaByPid",{id:t}).then(function(t){t&&(i.city=t.data.data,i.isSelect=!0)})},clearArea:function(){this.manageArea=[],this.commit()},commit:function(){var t=this;this.$http.post("/weiXin/api/v1/user/managerSetManagerAreas",{leadSubordinatesList:this.manageArea.map(function(t){return{cityId:t.pid,districtId:t.id,provinceId:t.oid}}),userId:this.$route.query.userId},{"Content-Type":"application/json"},!0).then(function(e){e&&t.$router.go(-1)})},getUserIfo:function(){var t=this;this.$http.get("/weiXin/api/v1/user/selectLeadSubordinatesByUserId",{userId:this.$route.query.userId}).then(function(e){e&&(t.manageArea=e.data.data.map(function(t){return{id:t.districtId,pid:t.cityId,oid:t.provinceId}}))})},getWaterMerchantIds:function(){var t=this;this.$http.get("/weiXin/api/v1/WaterMerchantIds/getWaterMerchantIds").then(function(e){if(e){var i=e.data.data.map(function(t){return{id:t.districtId,pid:t.cityId,oid:t.provinceId}});t.manageArea=t.manageArea.concat(i)}})}},created:function(){this.getProvince(),this.getUserIfo(),this.getWaterMerchantIds()},mounted:function(){this.initScroll(this.$refs.provScroll),this.initScroll(this.$refs.cityScroll),this.initScroll(this.$refs.areaScroll)}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"areaList"},[i("div",{staticClass:"area-select"},[i("div",{staticClass:"province"},[i("p",[t._v("选择省")]),t._v(" "),i("div",{ref:"provScroll",staticClass:"province-item"},[i("div",t._l(t.province,function(e){return i("li",{key:e.id,on:{click:function(i){t.getCity(e.id)}}},[i("el-badge",{attrs:{value:t.manageArea.filter(function(t){return t.oid==e.id}).length,hidden:!t.manageArea.filter(function(t){return t.oid==e.id}).length>0}},[t._v("\n                          "+t._s(e.district)+"\n                          ")])],1)}))])]),t._v(" "),i("div",{staticClass:"district"},[i("div",{staticClass:"clear-area"},[i("el-button",{on:{click:t.clearArea}},[t._v("清空")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isSelect,expression:"isSelect"}],ref:"cityScroll",staticClass:"city"},[i("div",t._l(t.city,function(e){return i("el-button",{key:e.id,on:{click:function(i){t.getArea(e.id,e.pid)}}},[i("el-badge",{attrs:{value:t.manageArea.filter(function(t){return t.pid==e.id}).length,hidden:!t.manageArea.filter(function(t){return t.pid==e.id}).length>0}},[t._v("\n                          "+t._s(e.district)+"\n                      ")])],1)}))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.areaList.length>0,expression:"areaList.length>0"}],staticClass:"area-list"},[i("div",{ref:"areaScroll",staticClass:"area"},[i("div",t._l(t.areaList,function(e){return i("label",{key:e.id,attrs:{for:e.id}},[i("el-row",{staticClass:"areaitem",attrs:{type:"flex",justify:"space-between",align:"middle"}},[i("el-col",{attrs:{span:20}},[t._v("\n                                  "+t._s(e.district)+"\n                              ")]),t._v(" "),i("el-col",{attrs:{span:3}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.manageArea,expression:"manageArea"}],attrs:{type:"checkbox",id:e.id},domProps:{value:{id:e.id,pid:e.pid,oid:e.oid},checked:Array.isArray(t.manageArea)?t._i(t.manageArea,{id:e.id,pid:e.pid,oid:e.oid})>-1:t.manageArea},on:{change:function(i){var a=t.manageArea,n=i.target,r=!!n.checked;if(Array.isArray(a)){var c={id:e.id,pid:e.pid,oid:e.oid},s=t._i(a,c);n.checked?s<0&&(t.manageArea=a.concat([c])):s>-1&&(t.manageArea=a.slice(0,s).concat(a.slice(s+1)))}else t.manageArea=r}}}),t._v(" "),i("div",{staticClass:"checklabel"})])],1)],1)}))]),t._v(" "),i("div",{staticClass:"area-confirm"},[i("el-button",{on:{click:t.commit}},[t._v("确定")])],1)])])])])},staticRenderFns:[]};var d=i("46Yf")(c,s,!1,function(t){i("rZsu")},null,null);e.default=d.exports},rZsu:function(t,e){}});
//# sourceMappingURL=26.9f62e6847ab5ef537d4a.js.map