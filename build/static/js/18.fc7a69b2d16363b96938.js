webpackJsonp([18],{L9Wr:function(e,t){},"hE/y":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("ifoU"),l=n.n(o),a=n("mvHQ"),i=n.n(a),r=n("Dd8w"),c=n.n(r),s=n("qn9g"),f={components:{},props:{},data:function(){return{offlineCollector:[],offlineSinglemeter:[],offlineWatermeter:[],activeName:"second",loop:null}},methods:{install:function(e,t){var n=this;this.$confirm("是否重新安装该设备?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){2==e?n.$http.post("/weiXin/api/v1/deviceManager/collectorAndWirelessInstall",c()({},t)).then(function(e){e&&(n.offlineCollector.splice(t,1),Object(s.c)("collector",t.deviceNumber),n.$message({type:"success",message:"安装成功!"}))}):1==e?n.$http.post("/weiXin/api/v1/deviceManager/collectorAndWirelessInstall",c()({},t)).then(function(e){e&&(n.offlineSinglemeter.splice(t,1),Object(s.c)("singlemeter",t.deviceNumber),n.$message({type:"success",message:"安装成功!"}))}):n.$http.post("/weiXin/api/v1/deviceManager/generalInstall",c()({},t)).then(function(e){e&&(n.offlineWatermeter.splice(t,1),Object(s.c)("watermeter",t.deviceNumber),n.$message({type:"success",message:"安装成功!"}))})}).catch(function(){})},remove:function(e,t,n,o){var l=this;this.loop=setTimeout(function(){l.$confirm("是否删除该设备?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(t.splice(o,1),1==e.type){var n=JSON.parse(localStorage.getItem("singlemeter"));n.splice(o,1),localStorage.setItem("singlemeter",i()(n))}else if(2==e.type){var l=JSON.parse(localStorage.getItem("collector"));l.splice(o,1),localStorage.setItem("collector",i()(l))}else{var a=JSON.parse(localStorage.getItem("watermeter"));a.splice(o,1),localStorage.setItem("watermeter",i()(a))}}).catch(function(){})},500)},clear:function(){clearTimeout(this.loop)}},filters:{timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()+"  ")+(t.getHours()+":")+t.getMinutes()}},watch:{},computed:{},created:function(){},mounted:function(){var e=this;!function(){var t=new l.a;if(localStorage.getItem("collector")){var n=JSON.parse(localStorage.getItem("collector"));e.offlineCollector=n.filter(function(e){return!t.has(i()(e))&&t.set(i()(e),1)})}if(localStorage.getItem("singlemeter")){var o=JSON.parse(localStorage.getItem("singlemeter"));e.offlineSinglemeter=o.filter(function(e){return!t.has(i()(e))&&t.set(i()(e),1)})}if(localStorage.getItem("watermeter")){var a=JSON.parse(localStorage.getItem("watermeter"));e.offlineWatermeter=a.filter(function(e){return!t.has(i()(e))&&t.set(i()(e),1)})}}()}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"textResult"}},[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{staticClass:"offlinedata",attrs:{label:"无线单表",name:"first"}},e._l(e.offlineSinglemeter,function(t,o){return n("ul",{key:o,on:{touchstart:function(n){e.remove(t,e.offlineSinglemeter,n)},mouseup:e.clear}},[n("li",[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("div",[n("h3",[e._v("设备ID："+e._s(t.deviceNumber))]),e._v(" "),n("p",[e._v(e._s(e._f("timestampToTime")(t.time)))])]),e._v(" "),n("div",[n("el-button",{on:{click:function(n){n.stopPropagation(),e.install(1,t)}}},[e._v("安装")])],1)])],1)])})),e._v(" "),n("el-tab-pane",{staticClass:"offlinedata",attrs:{label:"采集器",name:"second"}},e._l(e.offlineCollector,function(t,o){return n("ul",{key:o,on:{touchstart:function(n){e.remove(t,e.offlineCollector,n,o)},mouseup:e.clear}},[n("li",[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("div",[n("h3",[e._v("设备ID："+e._s(t.deviceNumber))]),e._v(" "),n("p",[e._v(e._s(e._f("timestampToTime")(t.time)))])]),e._v(" "),n("div",[n("el-button",{on:{click:function(n){n.stopPropagation(),e.install(2,t)}}},[e._v("安装")])],1)])],1)])})),e._v(" "),n("el-tab-pane",{staticClass:"offlinedata",attrs:{label:"水表",name:"third"}},e._l(e.offlineWatermeter,function(t,o){return n("ul",{key:o,on:{touchstart:function(n){e.remove(t,e.offlineWatermeter,n)},mouseup:e.clear}},[n("li",[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("div",[n("h3",[e._v("设备ID："+e._s(t.deviceNumber))]),e._v(" "),n("p",[e._v(e._s(e._f("timestampToTime")(t.time)))])]),e._v(" "),n("div",[n("el-button",{on:{click:function(n){n.stopPropagation(),e.install(3,t)}}},[e._v("安装")])],1)])],1)])}))],1)],1)},staticRenderFns:[]};var m=n("VU/8")(f,u,!1,function(e){n("L9Wr")},null,null);t.default=m.exports}});
//# sourceMappingURL=18.fc7a69b2d16363b96938.js.map