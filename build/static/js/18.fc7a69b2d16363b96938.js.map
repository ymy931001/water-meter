{"version":3,"sources":["webpack:///src/components/list/offline/offline.vue","webpack:///./src/components/list/offline/offline.vue?8098","webpack:///./src/components/list/offline/offline.vue"],"names":["offline_offline","_this","this","then","data","res","deviceNumber","_this2","result","_result","_result2","loop","getMinutes","_this3","map_default","a","list_offline_offline","render","_vm","_h","$createElement","_c","_self","attrs","id","model","value","callback","$$v","activeName","expression","staticClass","label","name","_l","item","ind","key","on","touchstart","$event","remove","offlineSinglemeter","mouseup","clear","type","justify","_v","_s","_f","time","click","stopPropagation","install","offlineCollector","offlineWatermeter","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/18.fc7a69b2d16363b96938.js","sourcesContent":["<template>\n  <div id=\"textResult\">\n    <el-tabs v-model=\"activeName\" >\n        <el-tab-pane label=\"无线单表\" name=\"first\" class=\"offlinedata\">\n            <ul v-for=\"(item,ind) in offlineSinglemeter\" :key=\"ind\" @touchstart=\"remove(item,offlineSinglemeter,$event)\" @mouseup=\"clear\">\n                <li>\n                    <el-row type=\"flex\" justify=\"space-between\">\n                        <div>\n                            <h3>设备ID：{{item.deviceNumber}}</h3>\n                            <p>{{item.time | timestampToTime }}</p>\n                        </div>\n                        <div><el-button @click.stop=\"install(1,item)\">安装</el-button></div>\n                    </el-row>\n                </li>\n            </ul>\n        </el-tab-pane>\n        <el-tab-pane label=\"采集器\" name=\"second\" class=\"offlinedata\">\n            <ul v-for=\"(item,ind) in offlineCollector\" :key=\"ind\" @touchstart=\"remove(item,offlineCollector,$event,ind)\" @mouseup=\"clear\">\n                <li>\n                    <el-row type=\"flex\" justify=\"space-between\">\n                        <div>\n                            <h3>设备ID：{{item.deviceNumber}}</h3>\n                            <p>{{item.time | timestampToTime }}</p>\n                        </div>\n                        <div><el-button @click.stop=\"install(2,item)\">安装</el-button></div>\n                    </el-row>\n                </li>\n            </ul>\n        </el-tab-pane>\n        <el-tab-pane label=\"水表\" name=\"third\" class=\"offlinedata\">\n            <ul v-for=\"(item,ind) in offlineWatermeter\" :key=\"ind\" @touchstart=\"remove(item,offlineWatermeter,$event)\" @mouseup=\"clear\">\n                <li>\n                    <el-row type=\"flex\" justify=\"space-between\">\n                        <div>\n                            <h3>设备ID：{{item.deviceNumber}}</h3>\n                            <p>{{item.time | timestampToTime }}</p>\n                        </div>\n                        <div><el-button @click.stop=\"install(3,item)\">安装</el-button></div>\n                    </el-row>\n                </li>\n            </ul>\n        </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<script>\nimport {removeStorage} from '@/assets/js/offline.js'\nexport default {\n  components:{},\n  props:{},\n  data(){\n    return {\n        offlineCollector:[],\n        offlineSinglemeter:[],\n        offlineWatermeter:[],\n        activeName: 'second',\n        loop:null\n    }\n\t},\n\tmethods:{\n\t\tinstall(type,data){\n            this.$confirm('是否重新安装该设备?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                if(type==2){\n                    this.$http.post('/weiXin/api/v1/deviceManager/collectorAndWirelessInstall',{...data})\n                    .then(res=>{\n                        if(res){\n                            this.offlineCollector.splice(data,1)\n                            removeStorage('collector',data.deviceNumber)\n                            this.$message({\n                                type: 'success',\n                                message: '安装成功!'\n                            });\n                        }\n                    })\n                }else if(type==1){\n                    this.$http.post('/weiXin/api/v1/deviceManager/collectorAndWirelessInstall',{...data})\n                    .then(res=>{\n                        if(res){\n                            this.offlineSinglemeter.splice(data,1)\n                            removeStorage('singlemeter',data.deviceNumber)\n                            this.$message({\n                                type: 'success',\n                                message: '安装成功!'\n                            });\n                        }\n                    })\n                }\n                else{\n                    this.$http.post('/weiXin/api/v1/deviceManager/generalInstall',{...data})\n                    .then(res=>{\n                        if(res){\n                            this.offlineWatermeter.splice(data,1)\n                            removeStorage('watermeter',data.deviceNumber)\n                            this.$message({\n                                type: 'success',\n                                message: '安装成功!'\n                            });\n                        }\n                    })\n                }\n            }).catch(() => {\n    \n            });\n            \n        },\n        remove(item,table,e,index){\n            this.loop=setTimeout(() => {\n                    this.$confirm('是否删除该设备?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                    }).then(() => {\n                        table.splice(index,1)\n                        if(item.type==1){\n                            let result=JSON.parse(localStorage.getItem('singlemeter'))\n                            result.splice(index,1)\n                            localStorage.setItem('singlemeter',JSON.stringify(result))\n                        }else if(item.type==2){\n                            let result=JSON.parse(localStorage.getItem('collector'))\n                            result.splice(index,1)\n                            localStorage.setItem('collector',JSON.stringify(result))\n                        }else{\n                            let result=JSON.parse(localStorage.getItem('watermeter'))\n                            result.splice(index,1)\n                            localStorage.setItem('watermeter',JSON.stringify(result))\n                        }   \n                    }).catch(() => {\n            \n                    });\n                }, 500);\n            \n        },\n        clear(){\n            clearTimeout(this.loop)\n        }\n    },\n  filters:{\n      timestampToTime(timestamp) {\n        let date = new Date(timestamp);//时间戳为10位需*1000，时间戳为13位的话不需乘1000\n        let Y = date.getFullYear() + '-';\n        let M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';\n        let D = date.getDate()+'  ' \n        let H = date.getHours()+ ':';\n        let m = date.getMinutes()\n        return Y+M+D+H+m;\n    } \n\n  },\n  watch:{},\n  computed:{},\n  created(){},\n  mounted(){\n      (()=>{\n          var seen = new Map()\n          if(localStorage.getItem('collector')){\n              let array=JSON.parse(localStorage.getItem('collector'))\n              this.offlineCollector=array.filter((a) => !seen.has(JSON.stringify(a)) && seen.set(JSON.stringify(a), 1))\n             \n          }\n          if(localStorage.getItem('singlemeter')){\n              let array=JSON.parse(localStorage.getItem('singlemeter'))\n              this.offlineSinglemeter=array.filter((a) => !seen.has(JSON.stringify(a)) && seen.set(JSON.stringify(a), 1))\n          }\n          if(localStorage.getItem('watermeter')){\n              let array=JSON.parse(localStorage.getItem('watermeter'))\n              this.offlineWatermeter=array.filter((a) => !seen.has(JSON.stringify(a)) && seen.set(JSON.stringify(a), 1))\n          }\n\n      })()\n  }\n}\n</script>\n<style  lang=\"less\">\n#textResult{\n\toverflow: scroll;\n    background: #f8f8f8;\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    .el-tabs__nav{\n        width: 100%;\n    }\n\t.el-tabs__item{\n        width: 33%;\n        text-align: center;\n    }\n    .offlinedata{\n        ul{\n            border-bottom: 1px solid rgb(224, 224, 224);\n            padding: 10px 5px;\n            cursor: pointer;\n        }\n    }\n\n\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/list/offline/offline.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"textResult\"}},[_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{staticClass:\"offlinedata\",attrs:{\"label\":\"无线单表\",\"name\":\"first\"}},_vm._l((_vm.offlineSinglemeter),function(item,ind){return _c('ul',{key:ind,on:{\"touchstart\":function($event){_vm.remove(item,_vm.offlineSinglemeter,$event)},\"mouseup\":_vm.clear}},[_c('li',[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"space-between\"}},[_c('div',[_c('h3',[_vm._v(\"设备ID：\"+_vm._s(item.deviceNumber))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm._f(\"timestampToTime\")(item.time)))])]),_vm._v(\" \"),_c('div',[_c('el-button',{on:{\"click\":function($event){$event.stopPropagation();_vm.install(1,item)}}},[_vm._v(\"安装\")])],1)])],1)])})),_vm._v(\" \"),_c('el-tab-pane',{staticClass:\"offlinedata\",attrs:{\"label\":\"采集器\",\"name\":\"second\"}},_vm._l((_vm.offlineCollector),function(item,ind){return _c('ul',{key:ind,on:{\"touchstart\":function($event){_vm.remove(item,_vm.offlineCollector,$event,ind)},\"mouseup\":_vm.clear}},[_c('li',[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"space-between\"}},[_c('div',[_c('h3',[_vm._v(\"设备ID：\"+_vm._s(item.deviceNumber))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm._f(\"timestampToTime\")(item.time)))])]),_vm._v(\" \"),_c('div',[_c('el-button',{on:{\"click\":function($event){$event.stopPropagation();_vm.install(2,item)}}},[_vm._v(\"安装\")])],1)])],1)])})),_vm._v(\" \"),_c('el-tab-pane',{staticClass:\"offlinedata\",attrs:{\"label\":\"水表\",\"name\":\"third\"}},_vm._l((_vm.offlineWatermeter),function(item,ind){return _c('ul',{key:ind,on:{\"touchstart\":function($event){_vm.remove(item,_vm.offlineWatermeter,$event)},\"mouseup\":_vm.clear}},[_c('li',[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"space-between\"}},[_c('div',[_c('h3',[_vm._v(\"设备ID：\"+_vm._s(item.deviceNumber))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm._f(\"timestampToTime\")(item.time)))])]),_vm._v(\" \"),_c('div',[_c('el-button',{on:{\"click\":function($event){$event.stopPropagation();_vm.install(3,item)}}},[_vm._v(\"安装\")])],1)])],1)])}))],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3e94c4cc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/list/offline/offline.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3e94c4cc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./offline.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./offline.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3e94c4cc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./offline.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/list/offline/offline.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}