{"version":3,"sources":["webpack:///src/components/list/textonline/textonline.vue","webpack:///./src/components/list/textonline/textonline.vue?15e6","webpack:///./src/components/list/textonline/textonline.vue"],"names":["textonline","QR","qrId","newdata","row","_ref","value","_this","this","refresh","colloectrPage","then","finishPullUp","singlemeterPage","finishPullDown","_this2","equipId","res","push","deviceNumber","completeDistrict","map","catch","err","_this3","done","message","_this4","eid","collectorId","_this5","typeNum","tableData","resolve","_this6","oneDate","_this7","collectorWrapper","singleWrapper","handleScroll","textonline_textonline","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","placeholder","clearable","model","callback","$$v","expression","_v","type","on","click","searchEquipByid","class","onfix","tab-click","handleClick","activeName","label","name","ref","directives","rawName","staticStyle","width","size","border","stripe","header-row-class-name","row-class-name","equipTabel","data","collectorData","fixed","prop","filters","filter-method","filterType","scopedSlots","_u","key","fn","command","$event","stopPropagation","onlineTest","pollingTest","onlineTestResult","singleData","filters2","filterType2","title","visible","dialogVisible","update:visible","slot","confirm","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/14.12347d44d47671025187.js","sourcesContent":["<template>\r\n  <div id=\"textonline\">\r\n\t\t<div class=\"block\">\r\n\t\t\t<div class=\"qr\">\r\n\t\t\t\t<el-input\r\n\t\t\t\tclass=\"idSearch\"\r\n\t\t\t\tplaceholder=\"输入或扫描设备编号\"\r\n\t\t\t\tv-model=\"equipId\"\r\n\t\t\t\tclearable>\r\n\t\t\t\t</el-input>\r\n\t\t\t\t<QR/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<el-row>\r\n\t\t\t<el-button type=\"primary\" class=\"searchConfirm\" @click=\"searchEquipByid\">查询</el-button>\r\n\t\t\t</el-row>\r\n\r\n\t\t\t<el-tabs :class=\"{onfix}\" v-model=\"activeName\" @tab-click=\"handleClick\">\r\n\t\t\t\t<el-tab-pane  label=\"采集器\" name=\"2\">\r\n\t\t\t\t\t<div class=\"cloWra\" ref=\"collectorWrapper\">\r\n\t\t\t\t\t\t<el-table\r\n\t\t\t\t\t\t\tclass=\"searchResult\"\r\n\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\tborder\r\n\t\t\t\t\t\t\tstripe\r\n\t\t\t\t\t\t\tv-loading=\"loadingClo\"\r\n\t\t\t\t\t\t\theader-row-class-name=\"equipHead\"\r\n\t\t\t\t\t\t\t:row-class-name=\"equipTabel\"\r\n\t\t\t\t\t\t\t:data=\"collectorData\"\r\n\t\t\t\t\t\t\tstyle=\"width: 100%\">\r\n\t\t\t\t\t\t\t<el-table-column\r\n\t\t\t\t\t\t\t\tfixed\r\n\t\t\t\t\t\t\t\tprop=\"id\"\r\n\t\t\t\t\t\t\t\tlabel=\"设备编号\"\r\n\t\t\t\t\t\t\t\twidth=\"120\">\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t\t<el-table-column\r\n\t\t\t\t\t\t\t\t:filters=\"filters\"\r\n\t\t\t\t\t\t\t\t:filter-method=\"filterType\"\r\n\t\t\t\t\t\t\t\tprop=\"result\"\r\n\t\t\t\t\t\t\t\tlabel=\"测试结果\">\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t\t<el-table-column\t\r\n\t\t\t\t\t\t\tlabel=\"操作\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"command\">\r\n\t\t\t\t\t\t\t\t\t<el-button  type=\"text\" size=\"small\" @click.stop=\"onlineTest(command.row.id)\">联网测试</el-button>\r\n\t\t\t\t\t\t\t\t\t<el-button  type=\"text\" size=\"small\" @click.stop=\"pollingTest(command.row.id)\">轮询测试</el-button>\r\n\t\t\t\t\t\t\t\t\t<el-button  type=\"text\" size=\"small\" @click.stop=\"onlineTestResult(command.row.id)\">联网测试结果</el-button>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column\t>\r\n\t\t\t\t\t\t</el-table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-tab-pane>\r\n\t\t\t\t<el-tab-pane label=\"无线单表\" name=\"1\">\r\n\t\t\t\t\t<div class=\"cloWra\" ref=\"singleWrapper\">\r\n\t\t\t\t\t\t<el-table\r\n\t\t\t\t\t\t\tclass=\"searchResult\"\r\n\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\tborder\r\n\t\t\t\t\t\t\tstripe\r\n\t\t\t\t\t\t\theader-row-class-name=\"equipHead\"\r\n\t\t\t\t\t\t\t:row-class-name=\"equipTabel\"\r\n\t\t\t\t\t\t\t:data=\"singleData\"\r\n\t\t\t\t\t\t\tstyle=\"width: 100%\">\r\n\t\t\t\t\t\t\t<el-table-column\r\n\t\t\t\t\t\t\t\tfixed\r\n\t\t\t\t\t\t\t\tprop=\"id\"\r\n\t\t\t\t\t\t\t\tlabel=\"设备编号\"\r\n\t\t\t\t\t\t\t\twidth=\"120\">\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t\t<el-table-column\r\n\t\t\t\t\t\t\t\t:filters=\"filters2\"\r\n\t\t\t\t\t\t\t\t:filter-method=\"filterType2\"\r\n\t\t\t\t\t\t\t\tprop=\"result\"\r\n\t\t\t\t\t\t\t\tlabel=\"测试结果\">\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t\t<el-table-column\t\r\n\t\t\t\t\t\t\tlabel=\"操作\">\r\n\t\t\t\t\t\t\t\t<template slot-scope=\"command\">\r\n\t\t\t\t\t\t\t\t\t<el-button  type=\"text\" size=\"small\" @click.stop=\"onlineTest(command.row.id)\">联网测试</el-button>\r\n\t\t\t\t\t\t\t\t\t<el-button  type=\"text\" size=\"small\" @click.stop=\"onlineTestResult(command.row.id)\">联网测试结果</el-button>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t</el-table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-tab-pane>\r\n\t\t\t</el-tabs>\r\n\r\n\t  </div>\r\n\r\n\t  <el-dialog\r\n\t\ttitle=\"提示\"\r\n\t\t:visible.sync=\"dialogVisible\"\r\n\t\twidth=\"30%\">\r\n\t\t<div id=\"parameterDetail\">\r\n\t\t\t<el-table\r\n\t\t\t\tclass=\"searchResult\"\r\n\t\t\t\tv-loading=\"loading\"\r\n\t\t\t\tsize=\"mini\"\r\n\t\t\t\tborder\r\n\t\t\t\tstripe\r\n\t\t\t\theader-row-class-name=\"equipHead\"\r\n\t\t\t\trow-class-name=\"equipTabel\"\r\n\t\t\t\t:data=\"oneDate\"\r\n\t\t\t\tstyle=\"width: 100%\">\r\n\t\t\t\t<el-table-column\r\n\t\t\t\t\tprop=\"props\"\r\n\t\t\t\t\tlabel=\"参数\"\r\n\t\t\t\t\twidth=\"100\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column\r\n\t\t\t\t\tprop=\"num\"\r\n\t\t\t\t\tlabel=\"数值\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t</div>\r\n\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t<el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n\t\t\t<el-button  type=\"primary\" @click=\"confirm\"> <i v-if=\"netloading\"  class=\"el-icon-loading\"></i> 重新测试</el-button>\r\n\t\t</span>\r\n\t</el-dialog> \r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Loading } from 'element-ui';\r\nimport BScroll from 'better-scroll'\r\nimport QR from '@/components/QR/QR.vue'\r\nimport { setInterval, clearInterval } from 'timers';\r\nimport store from '@/store/index.js'\r\nexport default {\r\n  components:{\r\n\t  QR\r\n  },\r\n  props:{},\r\n  data(){\r\n    return {\r\n\t\tcollectorScroll:null,\r\n        singleScroll:null,\r\n\t\tequipId:this.$store.state.qrId,\t\t\t\t\t//设备编号搜索\r\n\t\tactiveName: '2',\t\t//选项卡显示页\t\t\t\t\r\n\t\tonfix:false,\t\t\t\t//scroll显示\r\n\t\tcollectorData: [],\t\t\t//采集器数据\r\n\t\tsingleData:[],\t\t\t\t//无线单表数据\r\n\t\toneDate:[],\t\t\t\t\t//某一台设备数据\r\n\t\ttabObj:1,\t\t\t\t\t//选项卡显示的设备类型\r\n\t\tdialogVisible:false,\t\t//弹窗显示\r\n\t\tloading:false,\t\t\t\t//弹窗数据加载\r\n\t\tnetloading:false,\t\t\t//重新测试加载\r\n\t\tfilters:[{text: '通过', value: '通过'},{text: '未通过', value: '未通过'},{text: '未测试', value: '未测试'}],\r\n\t\tfilters2:[{text: '通过', value: '通过'},{text: '未通过', value: '未通过'},{text: '未测试', value: '未测试'}],\r\n\t\tloadingClo:false,\r\n\t\tcolloectrPage:1,\r\n\t\tsinglemeterPage:1\r\n    }\r\n  },\r\n  computed:{\r\n\t\tqrId:function(){\r\n\t\treturn this.$store.state.qrId\r\n\t\t\t}\r\n\t\t},\r\n\twatch:{\r\n\t\tqrId(newdata){\r\n\t\t\tthis.equipId=newdata\r\n\t\t}\r\n\t},\r\n  methods:{\r\n\t\tequipTabel({row, rowIndex}) {\r\n\t\t\tif (row.result !== \"通过\") {\r\n\t\t\t\treturn 'warning-row';\r\n\t\t\t}\r\n\t\t  },\r\n\t\tfilterType(value,row,column){\r\n\t\t\t\r\n            return row.result === value;\r\n\t\t},\r\n\t\tfilterType2(value,row,column){\r\n\t\t\t\r\n            return row.result === value;\r\n\t\t},\r\n\t\tinitScroll(Obj,SCobj){\r\n          if( !Obj ){\r\n\t\t\tObj = new BScroll(SCobj,{\r\n\t\t\t\tscrollX:false,\r\n\t\t\t\teventPassthrough:\"horizontal\",\r\n\t\t\t\tpullUpLoad:{\r\n\t\t\t\t\tthreshold: -50,\r\n\t\t\t\t},\r\n\t\t\t\tpullDownRefresh:{\r\n\t\t\t\t\tthreshold: -50,\r\n\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tObj.on('pullingUp',()=>{\t\t\t\t\r\n\t\t\t\t\tif(this.activeName==2){\r\n\t\t\t\t\t\tthis.colloectrPage++\r\n\t\t\t\t\t\tthis.searchDate(this.activeName,this.colloectrPage)\r\n\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\tObj.finishPullUp();\r\n\t\t\t\t\t\t\tObj.refresh()  \r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else if(this.activeName==1){\r\n\t\t\t\t\t\tthis.singlemeterPage++\r\n\t\t\t\t\t\tthis.searchDate(this.activeName,this.singlemeterPage) //\r\n\t\t\t\t\t\t.then(()=>{   \r\n\t\t\t\t\t\t\tObj.finishPullUp();\r\n\t\t\t\t\t\t\tObj.refresh()  \r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tObj.on('pullingDown',()=>{\t\t\t\t\r\n\t\t\t\t\tif(this.activeName==2){\r\n\t\t\t\t\t\tthis.colloectrPage=1\r\n\t\t\t\t\t\tthis.collectorData=[]\r\n\t\t\t\t\t\tthis.searchDate(this.activeName,1)\r\n\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\tObj.finishPullDown();\r\n\t\t\t\t\t\t\tObj.refresh()  \r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else if(this.activeName==1){\r\n\t\t\t\t\t\tthis.singleData=[]\r\n\t\t\t\t\t\tthis.singlemeterPage=1\r\n\t\t\t\t\t\tthis.searchDate(this.activeName,1) //\r\n\t\t\t\t\t\t.then(()=>{   \r\n\t\t\t\t\t\t\tObj.finishPullDown();\r\n\t\t\t\t\t\t\tObj.refresh()  \r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tObj.refresh()    \r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsearchEquipByid(){\r\n\t\t\tif(this.equipId){\r\n\t\t\t\tthis.dialogVisible=true\r\n\t\t\t\tthis.loading=true\r\n\t\t\t\tthis.$http.get('/weiXin/api/v1/deviceManager/getDeviceByDeviceNum',{deviceNumber:this.equipId})\r\n\t\t\t\t.then(res=>{\r\n\t\t\t\t\tlet Obj = res.data.data[0]\r\n\t\t\t\t\tlet map =[]\r\n\t\t\t\t\tmap.push(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops:\"设备类别\",\r\n\t\t\t\t\t\tnum:(Obj.deviceType==1&&\"无线单表\")||(Obj.deviceType==2&&\"采集器\")||(Obj.deviceType==3&&\"水表\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops:\"设备ID\",\r\n\t\t\t\t\t\tnum:Obj.deviceNumber\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops:\"设备地址\",\r\n\t\t\t\t\t\tnum:Obj.completeDistrict\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops:\"测试结果\",\r\n\t\t\t\t\t\tnum:(Obj.networkingTest==0&&\"未测试\")||(Obj.networkingTest==1&&\"通过\")||(Obj.networkingTest==2&&\"未通过\")\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.oneDate = map \r\n\t\t\t\t\tthis.loading =false\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=> {\r\n\t\t\t\t\tthis.loading =false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleClick(tab, event) {\r\n\t\tthis.tabObj=(tab._props.label==\"采集器\"&&1)||(tab._props.label==\"无线单表\"&&2)\r\n\t\t},\r\n\t\tonlineTest(eid){\r\n\t\t\tthis.$confirm('是否进行联网测试','提示',{\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\tbeforeClose:(action,instance,done)=>{\r\n\t\t\t\t\tif (action === 'confirm') {\r\n\t\t\t\t\t\tinstance.confirmButtonLoading = true;\r\n\t\t\t\t\t\tinstance.confirmButtonText = '执行中...';\r\n\t\t\t\t\t\tthis.$http.post('/weiXin/api/v1/deviceManager/networkingTest',{deviceNums:[eid],deviceType:this.activeName},{\r\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json; charset=UTF-8'\r\n\t\t\t\t\t\t\t},true)\t\t//联网测试\r\n\t\t\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\t\t\tif(res&&res.data.code==0){\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonLoading = false;\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonText = '确定';\r\n\t\t\t\t\t\t\t\t\tdone()\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\tmessage: eid+res.data.message\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonLoading = false;\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonText = '确定';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tdone();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(res=>{\r\n\t\t\t})\r\n\t\t\t.catch(err=>{\r\n\t\t\t})\r\n\t\t},\r\n\t\tpollingTest(eid){\r\n\t\t\tthis.$confirm('是否进行轮询测试','提示',{\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\tbeforeClose:(action,instance,done)=>{\r\n\t\t\t\t\tif (action === 'confirm') {\r\n\t\t\t\t\t\tinstance.confirmButtonLoading = true;\r\n\t\t\t\t\t\tinstance.confirmButtonText = '执行中...';\r\n\t\t\t\t\t\tthis.$http.get('/weiXin/api/v1/deviceManager/pollingTest',{deviceNum:eid})\r\n\t\t\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\t\t\tif(res&&res.data.code==0){\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonLoading = false;\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonText = '确定';\r\n\t\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\tmessage:'已提交测试请求'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tdone()\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonLoading = false;\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonText = '确定';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tdone();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(res=>{\r\n\t\t\t})\r\n\t\t\t.catch(err=>{\r\n\t\t\t})\r\n\t\t},  \r\n\t\tonlineTestResult(collectorId){\r\n\t\t\t// this.$store.commit('changetestId',collectorId)\r\n\t\t\tthis.$router.push({\r\n\t\t\t\tpath:'/testonlineResult',\r\n\t\t\t\tquery:{testId:collectorId}\r\n\t\t\t})\r\n\t\t},\r\n\t\t//获取数据\r\n\t\tsearchDate(typeNum,pageInd){\r\n\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\tthis.loadingClo=true\r\n\t\t\t\tthis.$http.post('/weiXin/api/v1/deviceManager/getListDeviceBySearch',{\r\n\t\t\t\t\ttype:typeNum,\r\n\t\t\t\t\tpageSize:10,\t//每页加载数量\r\n\t\t\t\t\tpageNum:pageInd  //页码\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t'Content-Type': 'application/json;charset=UTF-8'\r\n\t\t\t\t},true)\r\n\t\t\t\t.then(res=>{\r\n\t\t\t\t\tthis.loadingClo=false\r\n\t\t\t\t\tif(res){\r\n\t\t\t\t\t\tif(res.data.data.list.length>0){\r\n\t\t\t\t\t\t\tlet tableData=res.data.data.list.map((val,ind)=>{\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tid:val.deviceNumber,\r\n\t\t\t\t\t\t\t\t\taddress:val.completeDistrict,\r\n\t\t\t\t\t\t\t\t\tresult:(val.networkingTest==0&&\"未测试\")||(val.networkingTest==1&&\"通过\")||(val.networkingTest==2&&\"未通过\")||(val.networkingTest==3&&\"测试中\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tif(typeNum==2){\r\n\t\t\t\t\t\t\t\tthis.collectorData=this.collectorData.concat(tableData)\r\n\t\t\t\t\t\t\t}else if(typeNum==1){\r\n\t\t\t\t\t\t\t\tthis.singleData=this.singleData.concat(tableData)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tthis.loadingClo=false\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\tconfirm(){\r\n\t\t\tconsole.log(this.oneDate)\r\n\t\t\tthis.netloading=true\r\n\t\t\tthis.$http.post('/weiXin/api/v1/deviceManager/networkingTest',{deviceNums:[this.oneDate[1].num],deviceType:(this.oneDate[0].num=='采集器'&&2)||(this.oneDate[0].num=='无线单表'&&1)},{\r\n\t\t\t'Content-Type': 'application/json; charset=UTF-8'\r\n\t\t\t},true)\t\t//联网测试\r\n\t\t\t.then(res=>{\r\n\t\t\t\tif(res){\r\n\t\t\t\t\tthis.netloading=false\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\tmessage: this.oneDate[1].num+'联网测试已下发'\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.netloading=false\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\r\n\r\n  },\r\n  created(){},\r\n  mounted(){\r\n\t  \r\n\t  this.searchDate(2,1)\r\n\t  .then(()=>this.searchDate(1,1)\r\n\t  )\r\n\t  .then(()=>this.loadingClo=false\r\n\t  )\r\n\t  this.$nextTick(()=>{\r\n\t\t\tthis.initScroll(this.collectorScroll,this.$refs.collectorWrapper);\r\n\t\t\tthis.initScroll(this.singleScroll,this.$refs.singleWrapper);\r\n\r\n        });\r\n\t  \r\n  },\r\n  destroyed() {\r\n     window.removeEventListener('scroll', this.handleScroll)\r\n  },\r\n}\r\n</script>\r\n<style  lang=\"less\">\r\n#textonline{\r\n\t\r\n\t.block{\r\n\t\ttext-align: center;\r\n\t\t.idSearch{\r\n\t\t\t\twidth: 320px;\r\n\t\t}\r\n\t\t.qr{\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 320px;\r\n\t\t\tmargin: auto;\r\n\t\t\tline-height: 40px;\r\n\t\t}\r\n\t\t.searchConfirm{\r\n\t\t\t\twidth: 320px;\r\n\t\t\t\tmargin-top: 20px;\r\n\t\t\t\tmargin-bottom: 20px;\r\n\t\t\t}\r\n\t\t.onfix{\r\n\t\t\t.el-tabs__header{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tposition: fixed;\r\n\t\t\t\tz-index: 1000;\r\n\t\t\t\ttop: 40px;\r\n\t\t\t\tbackground: #fff;\r\n\t\t\t}\r\n\t\t\t.searchResult{\r\n\t\t\t\tmargin-top: 40px;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t// .el-tabs__content{\r\n\t// \tmargin-bottom: 50px;\r\n\t// }\r\n\t.warning-row{\r\n\t\t\tcolor: red\r\n\t\t}\r\n\t}\r\n\t .cloWra{\r\n\t\theight: 55vh;\r\n\t\toverflow: hidden;\r\n\t\tbutton{\r\n\t\t\tmargin: 0;\r\n\t\t\tcolor: #5287f1;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/list/textonline/textonline.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"textonline\"}},[_c('div',{staticClass:\"block\"},[_c('div',{staticClass:\"qr\"},[_c('el-input',{staticClass:\"idSearch\",attrs:{\"placeholder\":\"输入或扫描设备编号\",\"clearable\":\"\"},model:{value:(_vm.equipId),callback:function ($$v) {_vm.equipId=$$v},expression:\"equipId\"}}),_vm._v(\" \"),_c('QR')],1),_vm._v(\" \"),_c('el-row',[_c('el-button',{staticClass:\"searchConfirm\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchEquipByid}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-tabs',{class:{onfix: _vm.onfix},on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"采集器\",\"name\":\"2\"}},[_c('div',{ref:\"collectorWrapper\",staticClass:\"cloWra\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loadingClo),expression:\"loadingClo\"}],staticClass:\"searchResult\",staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"border\":\"\",\"stripe\":\"\",\"header-row-class-name\":\"equipHead\",\"row-class-name\":_vm.equipTabel,\"data\":_vm.collectorData}},[_c('el-table-column',{attrs:{\"fixed\":\"\",\"prop\":\"id\",\"label\":\"设备编号\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"filters\":_vm.filters,\"filter-method\":_vm.filterType,\"prop\":\"result\",\"label\":\"测试结果\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(command){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){$event.stopPropagation();_vm.onlineTest(command.row.id)}}},[_vm._v(\"联网测试\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){$event.stopPropagation();_vm.pollingTest(command.row.id)}}},[_vm._v(\"轮询测试\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){$event.stopPropagation();_vm.onlineTestResult(command.row.id)}}},[_vm._v(\"联网测试结果\")])]}}])})],1)],1)]),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"无线单表\",\"name\":\"1\"}},[_c('div',{ref:\"singleWrapper\",staticClass:\"cloWra\"},[_c('el-table',{staticClass:\"searchResult\",staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"border\":\"\",\"stripe\":\"\",\"header-row-class-name\":\"equipHead\",\"row-class-name\":_vm.equipTabel,\"data\":_vm.singleData}},[_c('el-table-column',{attrs:{\"fixed\":\"\",\"prop\":\"id\",\"label\":\"设备编号\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"filters\":_vm.filters2,\"filter-method\":_vm.filterType2,\"prop\":\"result\",\"label\":\"测试结果\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(command){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){$event.stopPropagation();_vm.onlineTest(command.row.id)}}},[_vm._v(\"联网测试\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){$event.stopPropagation();_vm.onlineTestResult(command.row.id)}}},[_vm._v(\"联网测试结果\")])]}}])})],1)],1)])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{attrs:{\"id\":\"parameterDetail\"}},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"searchResult\",staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"border\":\"\",\"stripe\":\"\",\"header-row-class-name\":\"equipHead\",\"row-class-name\":\"equipTabel\",\"data\":_vm.oneDate}},[_c('el-table-column',{attrs:{\"prop\":\"props\",\"label\":\"参数\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"num\",\"label\":\"数值\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirm}},[(_vm.netloading)?_c('i',{staticClass:\"el-icon-loading\"}):_vm._e(),_vm._v(\" 重新测试\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-2a2369ee\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/list/textonline/textonline.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.0@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2a2369ee\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=styles&index=0!./textonline.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=script&index=0!./textonline.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a2369ee\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=template&index=0!./textonline.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/list/textonline/textonline.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}