{"version":3,"sources":["webpack:///src/components/list/collector/testResult.vue","webpack:///./src/components/list/collector/testResult.vue?2818","webpack:///./src/components/list/collector/testResult.vue","webpack:///src/components/list/collector/collector.vue","webpack:///./src/components/list/collector/collector.vue?4a87","webpack:///./src/components/list/collector/collector.vue"],"names":["testResult","String","_this","this","refresh","pageNum","getResult","then","arr","_history","finishPullUp","_this2","data","wrapperDetail","_this3","deviceNum","res","offlineType","_this4","extends_default","collector","message","catch","e","_this5","handler","collector_testResult","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","size","border","history","fixed","prop","label","_v","on","click","$event","$el","style","setProperty","type","install","staticRenderFns","list_collector_testResult","__webpack_require__","normalizeComponent","ssrContext","getmaparea","isOffline","qrId","newdata","required","trigger","istrictId","district","options","Geolocation","Geocoder","enableSDKLocation","point","lat","lng","province","id","that","form","cityId","getVillage","$message","streetNumber","getStatus","part","val","show","village","address","provinceId","wid","name","phoneNumber","doorNumber","done","err","action","selectAddress","QR","collector_collector","model","label-width","rules","placeholder","clearable","value","callback","$$v","$set","expression","fetch-suggestions","querySearch","stopPropagation","slctAddress","_s","area","onSubmit","showMore","areaID","areaConfirm","collector_Component","collector_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/10.cd63f4fa85bffbb0a8f9.js","sourcesContent":["<template>\r\n  <div class=\"testResult\">\r\n        <div ref=\"wrapperDetail\" class=\"wrapper\"> \r\n            <div>\r\n                <el-table\r\n                    class=\"searchResult\"\r\n                    size=\"mini\"\r\n                    border\r\n                    :data=\"history\"\r\n                    >\r\n                    <el-table-column\r\n                        fixed\r\n                        prop=\"date\"\r\n                        label=\"读数时间\"\r\n                        \r\n                        >\r\n                    </el-table-column>\r\n                    <!-- <el-table-column\r\n                        label=\"历史读数\"\r\n                        prop=\"reading\"   \r\n                        >\r\n                        <template slot-scope={row}>\r\n                            {{row.reading?row.reading+'吨':'无'}}\r\n                        </template>\r\n                    </el-table-column> -->\r\n                    <el-table-column\r\n                        prop=\"voltage\"\r\n                        label=\"电压\"\r\n                        >\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"signalIntensity\"\r\n                        label=\"信号强度\"\r\n                        >\r\n                    </el-table-column>\r\n                </el-table>\r\n\r\n            </div>\r\n        </div>\r\n        <div class=\"hisOption\">\r\n            <el-button  @click=\"$el.style.setProperty('height',0)\">取消安装</el-button>\r\n            <el-button type=\"primary\" @click=\"install\">确定安装</el-button>\r\n        </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BScroll from 'better-scroll'\r\nimport { setTimeout } from 'timers';\r\nimport {offline,removeStorage} from '@/assets/js/offline.js'\r\nexport default {\r\n  components:{},\r\n  props:{\r\n      deviceNum:{\r\n          type:String\r\n      }\r\n  },\r\n  data(){\r\n    return {\r\n        history:[],\r\n        pageNum:1,\r\n        historyScroll:false,\r\n        isEnd:false,\r\n        collector:{},\r\n        isOffline:false//是否离线\r\n    }\r\n  },\r\n  watch:{},\r\n  computed:{},\r\n  methods:{\r\n      initScroll(Obj,SCobj){\r\n            if( !Obj ){\r\n                Obj = new BScroll(SCobj,{\r\n                    eventPassthrough:\"horizontal\",\r\n\t\t\t\t\tpullUpLoad:true\r\n\t\t\t\t})\r\n\t\t\t\tObj.on('pullingUp',()=>{\r\n                    this.pageNum++\r\n                    this.getResult()\r\n                    .then(arr=>{\r\n                        \r\n                        if(arr.length==0) this.isEnd=true\r\n                        this.history.push(...arr)\r\n                        Obj.finishPullUp();\r\n                        Obj.refresh()\r\n                    \r\n                    })\r\n\t\t\t\t})\r\n            }else{\r\n                Obj.refresh() \r\n            }\r\n        },\r\n      show(data){\r\n          this.collector=data\r\n          this.pageNum=1\r\n          this.isEnd=false\r\n          this.getResult()\r\n          .then(arr=>{\r\n              this.history=arr\r\n              setTimeout(()=>{\r\n                  this.initScroll(this.historyScroll,this.$refs.wrapperDetail)\r\n\r\n              },350)\r\n              \r\n          })\r\n      },\r\n      getResult(success){\r\n          return new Promise(resolve=>{\r\n              if(!this.isEnd){\r\n                  this.$http.get('/weiXin/api/v1/historyReading/getHistoryReading',{\r\n                      deviceNum:this.deviceNum,\r\n                      pageNum:this.pageNum,\r\n                      pageSize:10\r\n                  })\r\n                  .then(res=>{\r\n                      if(res){\r\n                          this.$el.style.setProperty('height','100vh')\r\n                          resolve(res.data.data)\r\n                          \r\n                      }\r\n                  })\r\n    \r\n              }\r\n\r\n          })\r\n      },\r\n      install(){\r\n            var offlineType\r\n\t\t\t\t\t\t\r\n            if(this.collector.type==1){\r\n                offlineType=\"singlemeter\"\r\n            }else if(this.collector.type==2){\r\n                offlineType=\"collector\"\r\n            }\r\n\r\n            if(this.isOffline){\r\n                offline(offlineType,data)\r\n            }else{\r\n                this.$http.post('/weiXin/api/v1/deviceManager/collectorAndWirelessInstall',{\r\n                        ...this.collector\r\n                    })//设备安装\r\n                .then(res=>{\r\n                    if(res){\r\n                        this.$http.post('/weiXin/api/v1/deviceManager/networkingTest',{deviceNums:[this.collector.deviceNumber],deviceType:this.collector.type},{//发起联网测试\r\n                            'Content-Type': 'application/json; charset=UTF-8'\r\n                        },true)\r\n                        .then(res=>{\r\n                            if(res){\r\n                                this.$message({\r\n                                    type: 'success',\r\n                                    message: this.collector.deviceNumber+'联网测试已下发'\r\n                                });\r\n                                this.$el.style.setProperty('height',0)\r\n                                this.$router.push('/textonline')\r\n                            }else {\r\n                                this.$message({\r\n                                    type: 'error',\r\n                                    message: '设备安装成功，联网测试下发失败'\r\n                                });\r\n                            }\t\t\t\r\n                        })\r\n                    }else {//安装失败\r\n                        this.$message({\r\n                            type:'error',\r\n                            message:res.data.message\r\n                        })\r\n                        this.$el.style.setProperty('height',0)\r\n                        this.$router.push('/textonline')\r\n                    }\r\n                })\r\n                .catch(e=>{\r\n                    if(e=='timeout'){\r\n                        offline(offlineType,data)\r\n                    }\r\n                })\r\n\r\n            }\r\n\r\n         \r\n      }\r\n  },\r\n  created(){},\r\n  mounted(){\r\n        var EventUtil = {\r\n            addHandler: function(element, type, handler) {\r\n                if (element.addEventListener) {\r\n                    element.addEventListener(type, handler, false);\r\n                } else if (element.attachEvent) {\r\n                    element.attachEvent(\"on\" + type, handler);\r\n                } else {\r\n                    element[\"on\" + type] = handler;\r\n                }\r\n            }\r\n        };\r\n        EventUtil.addHandler(window, \"online\", ()=> {\r\n               this.isOffline = false\r\n        });\r\n        EventUtil.addHandler(window, \"offline\", ()=> {\r\n            this.isOffline = true\r\n            \r\n    \r\n        });\r\n  }\r\n}\r\n</script>\r\n<style  lang=\"less\">\r\n.testResult{\r\n    padding-top: 40px;\r\n    height: 0;\r\n    width: 100%;\r\n    position: fixed;\r\n    top: 0;\r\n    background: #fff;\r\n    transition: height 0.3s ease-in-out;\r\n    overflow: hidden;\r\n    .wrapper{\r\n        height: 70%;\r\n        overflow: hidden;\r\n        >div{\r\n            min-height: calc(100% + 1px)\r\n        }\r\n        // .el-table{\r\n        //     // \r\n        // }\r\n    }\r\n    .hisOption{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        margin: 0 30px;\r\n    }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/list/collector/testResult.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"testResult\"},[_c('div',{ref:\"wrapperDetail\",staticClass:\"wrapper\"},[_c('div',[_c('el-table',{staticClass:\"searchResult\",attrs:{\"size\":\"mini\",\"border\":\"\",\"data\":_vm.history}},[_c('el-table-column',{attrs:{\"fixed\":\"\",\"prop\":\"date\",\"label\":\"读数时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"voltage\",\"label\":\"电压\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"signalIntensity\",\"label\":\"信号强度\"}})],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"hisOption\"},[_c('el-button',{on:{\"click\":function($event){_vm.$el.style.setProperty('height',0)}}},[_vm._v(\"取消安装\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.install}},[_vm._v(\"确定安装\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-7e38cd32\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/list/collector/testResult.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.0@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7e38cd32\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=styles&index=0!./testResult.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=script&index=0!./testResult.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7e38cd32\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=template&index=0!./testResult.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/list/collector/testResult.vue\n// module id = null\n// module chunks = ","<template>\r\n\t<div id=\"collector\">\r\n\t\t\r\n\t\t<el-form class=\"textform\" ref=\"form\" :model=\"form\" label-width=\"80px\" :rules=\"rules\" >\r\n\t\t\t<el-form-item class=\"location\" label=\"详细地址\" prop=\"address\" >\r\n\t\t\t\t<el-input v-model=\"form.address\" placeholder=\"门牌号、小区、楼栋号\" clearable></el-input>\r\n\t\t\t\t\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"所属小区\"  prop=\"village\" >\r\n\t\t\t\t<el-autocomplete\r\n\t\t\t\tclass=\"selectVillage\"\r\n\t\t\t\tv-model=\"form.village\"\r\n\t\t\t\t:fetch-suggestions=\"querySearch\"\r\n\t\t\t\tplaceholder=\"XX小区\"\r\n\t\t\t\tclearable></el-autocomplete>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"具体位置\" prop=\"doorNumber\">\r\n\t\t\t\t<el-input v-model=\"form.doorNumber\" placeholder=\"一单元天台\" clearable></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"设备编号\"  prop=\"id\">\r\n\t\t\t\t<el-input v-model=\"form.id\" placeholder=\"\"></el-input>\r\n\t\t\t\t<QR/>\r\n\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"安装地区\" prop=\"area\">\r\n\t\t\t<span class=\"seletArea\"  @click.stop=\"slctAddress\"  >{{form.area}}</span>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"onSubmit('form')\">提交测试</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-button type=\"text\" @click=\"showMore\" class=\"showMore\">更多信息<i class=\"el-icon-arrow-right\"></i> </el-button>\r\n\t\t\t<div class=\"collectorMore\" ref=\"collectorMore\">\r\n\t\t\t\t<el-form-item label=\"挂接水表\"  prop=\"wid\">\r\n\t\t\t\t\t<el-input v-model=\"form.wid\" placeholder=\"无线采集器可挂接的水表编号\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"用户姓名\" >\r\n\t\t\t\t<el-input v-model=\"form.name\" placeholder=\"\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"联系电话\" >\r\n\t\t\t\t<el-input v-model=\"form.phoneNumber\" placeholder=\"\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</el-form>\r\n\t\t<selectAddress ref=\"slcAdress\" :areaID=\"this.form\"  @areaConfirm=\"areaConfirm\"></selectAddress>\r\n\t\t<testResult :deviceNum=\"this.form.id\" ref=\"testResult\"/>\r\n\t\t\r\n\t</div>\r\n</template>\r\n<script>\r\nimport BMap from 'BMap'\r\nimport selectAddress  from '../../selectAddress/selectAddress.vue'\r\nimport testResult  from './testResult.vue'\r\nimport QR from '@/components/QR/QR.vue'\r\nimport store from '@/store/index.js'\r\nimport {offline,removeStorage} from '@/assets/js/offline.js'\r\n\texport default{\r\n\t\tmounted(){\r\n\t\t\tthis.getmaparea()\r\n\t\t\tvar EventUtil = {\r\n\t\t\t\taddHandler: function(element, type, handler) {\r\n\t\t\t\t\tif (element.addEventListener) {\r\n\t\t\t\t\t\telement.addEventListener(type, handler, false);\r\n\t\t\t\t\t} else if (element.attachEvent) {\r\n\t\t\t\t\t\telement.attachEvent(\"on\" + type, handler);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telement[\"on\" + type] = handler;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar that = this\r\n\t\t\tEventUtil.addHandler(window, \"online\", function() {\r\n\t\t\t\tthat.isOffline = false\r\n\t\t\t\tconsole.log('online:',that.isOffline)\r\n\t\t\t});\r\n\t\t\tEventUtil.addHandler(window, \"offline\", function() {\r\n\t\t\t\tthat.isOffline = true\r\n\t\t\t\tconsole.log('offline:',that.isOffline )\r\n\t\t\t});\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t\tqrId:function(){\r\n\t\t\t\treturn this.$store.state.qrId\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\t qrId(newdata){\r\n\t\t\t\t this.form.id=newdata\r\n\t\t\t}\r\n\t\t},\r\n\t\t data() {\r\n\t\t  return {\r\n\t\t\t\toptions:[],\r\n\t\t\t\tisOffline:false,\r\n\t\t\t\ttype:null,\r\n\t\t\tform: {\r\n\t\t\t\tid:'',\r\n\t\t\t\twid:null,\r\n\t\t\t\taddress:null,\r\n\t\t\t\tname: null,\r\n\t\t\t\tvillage:null,\r\n\t\t\t\tphoneNumber:null,\r\n\t\t\t\tdoorNumber:null,\r\n\t\t\t\ttype: [],\r\n\t\t\t\tprovinceId:null,\r\n\t\t\t\tarea:'请选择位置',\r\n\t\t\t\tcityId:null,\r\n\t\t\t\tistrictId:null,\r\n\t\t\t\tlat:null,\r\n\t\t\t\tlng:null\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tid: [\r\n\t\t\t\t\t{ required: true, message: '请输入编号', trigger: 'blur' },\r\n\t\t\t\t\t\r\n\t\t\t\t],\r\n\t\t\t\t\tarea:[\r\n\t\t\t\t\t\t{required:true}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvillage: [\r\n\t\t\t\t\t{ required: true, message: '请输入小区', trigger: 'change' }\r\n\t\t\t\t],\r\n\t\t\t\taddress: [\r\n\t\t\t\t\t{ required: true, message: '请填写详细地址', trigger: 'change' }\r\n\t\t\t\t],\r\n\t\t\t\tdoorNumber: [\r\n\t\t\t\t\t{ required: true, message: '请填写具体位置', trigger: 'blur' }\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t  }\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tshowMore(){\r\n\t\t\t\tthis.$refs.collectorMore.classList.toggle('ishow')\r\n\t\t\t},\r\n\t\t\tgetVillage(){\r\n\t\t\t\tthis.$http.get('/weiXin/api/v1/common/getAreaByPid',{\r\n\t\t\t\t\tid:this.form.istrictId\r\n\t\t\t\t})\r\n\t\t\t\t.then(res=>{\r\n\t\t\t\t\tif(res){\r\n\t\t\t\t\t\tthis.options=res.data.data.map(val=>{\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tvalue:val.district,\r\n\t\t\t\t\t\t\t\tlabel:val.district\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tquerySearch(queryString, cb) {\r\n\t\t\t\tvar options = this.options;\r\n\t\t\t\tvar results = queryString ? options.filter(this.createFilter(queryString)) : options;\r\n\t\t\t\t// 调用 callback 返回建议列表的数据\r\n\t\t\t\tcb(results);\r\n\t\t\t},\r\n\t\t\tcreateFilter(queryString) {\r\n\t\t\t\treturn (option) => {\r\n\t\t\t\treturn (option.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tgetmaparea(){\r\n\t\t\t\tlet that=this\r\n\t\t\t\tvar geoc = new BMap.Geolocation();\r\n\t\t\t\tvar myGeo = new BMap.Geocoder(); \t\t\r\n\t\t\t\tgeoc.enableSDKLocation();\t\r\n\t\t\t\tgeoc.getCurrentPosition(function(r){\r\n\t\t\t\t\tif(this.getStatus() == BMAP_STATUS_SUCCESS){\r\n\t\t\t\t\t\tvar mk = new BMap.Marker(r.point);\r\n\t\t\t\t\t\tvar mapPoint=new BMap.Point(r.point.lng,r.point.lat)\r\n\t\t\t\t\t\tthat.form.lat=r.point.lat\r\n\t\t\t\t\t\tthat.form.lng=r.point.lng\r\n\t\t\t\t\t\t//坐标转换完之后的回调函数\r\n\t\t\t\t\t\tmyGeo.getLocation(new BMap.Point(r.point.lng, r.point.lat), function(result){      \r\n\t\t\t\t\t\t\tif (result){   \r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthat.area=result.addressComponents.province + \"-\" + result.addressComponents.city + \"-\" + result.addressComponents.district   \r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthat.$http.get('/weiXin/api/v1/common/getIdsByDistrict',{\r\n\t\t\t\t\t\t\t\tprovince:result.addressComponents.province,\r\n\t\t\t\t\t\t\t\tcity: result.addressComponents.city.substring(0, result.addressComponents.city.length-1),\r\n\t\t\t\t\t\t\t\tdistrict:result.addressComponents.district.substring(0, result.addressComponents.district.length-1)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(res&&res.data.code==0){\r\n\t\t\t\t\t\t\t\t\tthat.form.provinceId=res.data.data[0].id,\r\n\t\t\t\t\t\t\t\t\tthat.form.cityId=res.data.data[1].id,\r\n\t\t\t\t\t\t\t\t\tthat.form.istrictId=res.data.data[2].id\r\n\t\t\t\t\t\t\t\t\tthat.getVillage()\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tthat.form.area=\"请选择地区\",\r\n\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\t\tmessage: '定位失败,请手动选择省市区地址'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthat.form.area=result.addressComponents.province + \"-\" + result.addressComponents.city + \"-\" + result.addressComponents.district \r\n\t\t\t\t\t\t\tthat.form.address=result.addressComponents.street + \"-\" + result.addressComponents.streetNumber\r\n\t\t\t\t\t\t\t}      \r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\talert('failed'+this.getStatus());\r\n\t\t\t\t\t}        \r\n\t\t\t\t});\t\t\r\n\r\n\r\n\r\n\t\t\t},\t\t\t\r\n\t\t\tareaConfirm(part){\r\n\t\t\t\tlet area =part.map((value,index)=>{\r\n\t\t\t\treturn value.part\r\n\t\t\t\t})\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.form.area = area.join('-')\r\n\t\t\t\t})\r\n\t\t\t\tlet areaid = part.map((val,ind)=>{\r\n\t\t\t\t\tif(val.id>0){\r\n\t\t\t\t\t\treturn val\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.form.provinceId = part[0]&&part[0].id\r\n\t\t\t\tthis.form.cityId = part[1]&&part[1].id\r\n\t\t\t\tthis.form.istrictId=part[2]&&part[2].id\r\n\t\t\t\tthis.getVillage()\r\n\t\t\t},\r\n\t\t\tslctAddress(){\r\n\t\t\t\tthis.$refs.slcAdress.show()\r\n\t\t\t},\r\n\t\t\tonSubmit(form) {\r\n\t\t\t\tlet that=this\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\ttype:this.type,\r\n\t\t\t\t\tdeviceNumber:this.form.id,\r\n\t\t\t\t\tlongitude:this.form.lng,\r\n\t\t\t\t\tdistrictSite:this.form.village,\r\n\t\t\t\t\tdistrictDetail:this.form.address,\r\n\t\t\t\t\tlatitude:this.form.lat,\r\n\t\t\t\t\tprovinceId:this.form.provinceId,\r\n\t\t\t\t\tcityId:this.form.cityId,\r\n\t\t\t\t\tdistrictId:this.form.istrictId,\r\n\t\t\t\t\tassociatedNum:this.form.wid,\r\n\t\t\t\t\tconsumerUname:this.form.name,\r\n\t\t\t\t\ttelephone:this.form.phoneNumber,\r\n\t\t\t\t\thouseNumber:this.form.doorNumber\r\n\t\t\t\t}\r\n\t\t\t\tvar offlineType\r\n\r\n\t\t\t\t\r\n\t\t\t\tthis.$refs[form].validate((valid)=>{\r\n\t\t\t\t\tif(valid){\r\n\t\t\t\t\t\tif(that.type==1){\r\n\t\t\t\t\t\t\tofflineType=\"singlemeter\"\r\n\t\t\t\t\t\t}else if(that.type==2){\r\n\t\t\t\t\t\t\tofflineType=\"collector\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.$confirm('是否进行测试？', '提示', {\r\n\t\t\t\t\t\t\tconfirmButtonText: '联网测试',\r\n\t\t\t\t\t\t\tcancelButtonText: '仅提交',\r\n\t\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\t\tcenter: true,\r\n\t\t\t\t\t\t\tdistinguishCancelAndClose:true,\r\n\t\t\t\t\t\t\tcloseOnClickModal:true,\r\n\t\t\t\t\t\t\tbeforeClose: (action, instance, done) => {\r\n\t\t\t\t\t\t\t\tif (action === 'confirm') {              //联网测试\r\n\t\t\t\t\t\t\t\t\t// instance.confirmButtonLoading = true;\r\n\t\t\t\t\t\t\t\t\t// instance.confirmButtonText = '执行中...';\r\n\t\t\t\t\t\t\t\t\tconsole.log(this.isOffline,that.isOffline)\r\n\t\t\t\t\t\t\t\t\tif(this.isOffline){\r\n\t\t\t\t\t\t\t\t\t\toffline(offlineType,data) \r\n\t\t\t\t\t\t\t\t\t\tdone()\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tif(this.$route.query.type==2){ //采集器安装需要查看当前数据\r\n\t\r\n\t\t\t\t\t\t\t\t\t\t\tthis.$refs.testResult.show(data)\r\n\t\t\t\t\t\t\t\t\t\t\tdone()\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif(this.$route.query.type==1){\r\n\t\t\t\t\t\t\t\t\t\t\tthis.$http.post('/weiXin/api/v1/deviceManager/collectorAndWirelessInstall',{\r\n\t\t\t\t\t\t\t\t\t\t\t\t...data\r\n\t\t\t\t\t\t\t\t\t\t\t})//设备安装\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(res){//安装成功\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.$http.post('/weiXin/api/v1/deviceManager/networkingTest',{deviceNums:[that.form.id],deviceType:this.type},{//发起联网测试\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Content-Type': 'application/json; charset=UTF-8'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinstance.confirmButtonLoading = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinstance.confirmButtonText = '联网测试';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdone()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: that.form.id+'联网测试已下发'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$router.push('/textonline')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: '设备安装成功，联网测试下发失败'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinstance.confirmButtonLoading = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinstance.confirmButtonText = '联网测试';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t}else {//安装失败\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinstance.confirmButtonLoading = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinstance.confirmButtonText = '联网测试';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype:'error',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage:res.data.message\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},300)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.catch(e=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(e=='timeout'){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toffline(offlineType,data)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tinstance.confirmButtonLoading = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tinstance.confirmButtonText = '联网测试';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdone()\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\r\n\t\t\t\t\t\t\t\t} else if(action === 'cancel'){\t\t\t\t\t//仅提交\r\n\t\t\t\t\t\t\t\t\tif(that.isOffline){\r\n\t\t\t\t\t\t\t\t\t\toffline(offlineType,data) \r\n\t\t\t\t\t\t\t\t\t\tdone()\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tthis.$http.post('/weiXin/api/v1/deviceManager/collectorAndWirelessInstall',{\r\n\t\t\t\t\t\t\t\t\t\t\t...data\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\t\t\t\t\t\tremoveStorage(offlineType,this.form.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\tdone()\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: this.form.id+'安装成功'\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype:'error',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage:res.data.message\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.catch(err=>{\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t// removeStorage(offlineType,that.form.id)\t\r\n\t\t\t\t\t\t\t\t\tdone()\t\t\t//点击其他区域关闭 action=close\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonLoading = false;\r\n\t\t\t\t\t\t\t\t\tinstance.confirmButtonText = '联网测试';\r\n\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}).catch((action) => {\r\n\t\r\n\t\t\t\t\t\t});\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('error submit!!');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t  },\r\n\t\t\t\r\n\t\t\t  \r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\t\tselectAddress,\r\n\t\t\t\tQR,\r\n\t\t\t\ttestResult\r\n\t\t\t},\r\n\t\tactivated() {\r\n\t\t\tif(this.$route.query.type!==null){\r\n\t\t\t\t\tthis.type=this.$route.query.type\r\n\t\t\t\t}\r\n\t\t\tif(this.form.id&&this.form.id.length>6){\r\n\t\t\t\tthis.$store.commit('changeId',this.form.id.substring(0,6))\r\n\t\t\t\t//默认前6位\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t  }\r\n</script>\r\n<style lang=\"less\">\r\n#collector{\r\n\t// margin-bottom: 120px;\r\n\t.textform{\r\n\tpadding: 0 20px 0 20px;\r\n\t// .el-form-item{\r\n\t// \tmargin-bottom: 9px;\r\n\t// }\r\n\t}\r\n\t.part{\r\n\tmargin-top: 20px;\r\n\t}\r\n\t.selectVillage{\r\n\t\twidth: 100%;\r\n\t\t.el-input__suffix{\r\n\t\t\t\tright:0;\r\n\t\t\t}\r\n\t}\r\n\t.seletArea{\r\n\t\t-webkit-appearance: none;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tbackground-image: none;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tborder: 1px solid #dcdfe6;\r\n\t\t\t-webkit-box-sizing: border-box;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tcolor: #606266;\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tfont-size: inherit;\r\n\t\t\theight: 40px;\r\n\t\t\tline-height: 40px;\r\n\t\t\toutline: 0;\r\n\t\t\tpadding: 0 15px;\r\n\t\t\t-webkit-transition: border-color .2s cubic-bezier(.645,.045,.355,1);\r\n\t\t\ttransition: border-color .2s cubic-bezier(.645,.045,.355,1);\r\n\t\t\twidth: 100%;\r\n\t}\r\n\t.showMore{\r\n\t\tmargin-top: -15px;\r\n\t}\r\n\t.collectorMore{\r\n\t\ttransition: transform 0.3s ease-out;\r\n\t\ttransform-origin:0 0;\r\n\t\ttransform: rotateX(-90deg) \r\n\t}\r\n\t.ishow{\r\n\t\ttransform: rotateX(0deg);\r\n\t}\r\n}\r\n\r\n\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/list/collector/collector.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"collector\"}},[_c('el-form',{ref:\"form\",staticClass:\"textform\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\",\"rules\":_vm.rules}},[_c('el-form-item',{staticClass:\"location\",attrs:{\"label\":\"详细地址\",\"prop\":\"address\"}},[_c('el-input',{attrs:{\"placeholder\":\"门牌号、小区、楼栋号\",\"clearable\":\"\"},model:{value:(_vm.form.address),callback:function ($$v) {_vm.$set(_vm.form, \"address\", $$v)},expression:\"form.address\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所属小区\",\"prop\":\"village\"}},[_c('el-autocomplete',{staticClass:\"selectVillage\",attrs:{\"fetch-suggestions\":_vm.querySearch,\"placeholder\":\"XX小区\",\"clearable\":\"\"},model:{value:(_vm.form.village),callback:function ($$v) {_vm.$set(_vm.form, \"village\", $$v)},expression:\"form.village\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"具体位置\",\"prop\":\"doorNumber\"}},[_c('el-input',{attrs:{\"placeholder\":\"一单元天台\",\"clearable\":\"\"},model:{value:(_vm.form.doorNumber),callback:function ($$v) {_vm.$set(_vm.form, \"doorNumber\", $$v)},expression:\"form.doorNumber\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"设备编号\",\"prop\":\"id\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.id),callback:function ($$v) {_vm.$set(_vm.form, \"id\", $$v)},expression:\"form.id\"}}),_vm._v(\" \"),_c('QR')],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"安装地区\",\"prop\":\"area\"}},[_c('span',{staticClass:\"seletArea\",on:{\"click\":function($event){$event.stopPropagation();_vm.slctAddress($event)}}},[_vm._v(_vm._s(_vm.form.area))])]),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.onSubmit('form')}}},[_vm._v(\"提交测试\")])],1),_vm._v(\" \"),_c('el-button',{staticClass:\"showMore\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.showMore}},[_vm._v(\"更多信息\"),_c('i',{staticClass:\"el-icon-arrow-right\"})]),_vm._v(\" \"),_c('div',{ref:\"collectorMore\",staticClass:\"collectorMore\"},[_c('el-form-item',{attrs:{\"label\":\"挂接水表\",\"prop\":\"wid\"}},[_c('el-input',{attrs:{\"placeholder\":\"无线采集器可挂接的水表编号\"},model:{value:(_vm.form.wid),callback:function ($$v) {_vm.$set(_vm.form, \"wid\", $$v)},expression:\"form.wid\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用户姓名\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"联系电话\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.phoneNumber),callback:function ($$v) {_vm.$set(_vm.form, \"phoneNumber\", $$v)},expression:\"form.phoneNumber\"}})],1)],1)],1),_vm._v(\" \"),_c('selectAddress',{ref:\"slcAdress\",attrs:{\"areaID\":this.form},on:{\"areaConfirm\":_vm.areaConfirm}}),_vm._v(\" \"),_c('testResult',{ref:\"testResult\",attrs:{\"deviceNum\":this.form.id}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-5cf4a4b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/list/collector/collector.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.0@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5cf4a4b6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=styles&index=0!./collector.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=script&index=0!./collector.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5cf4a4b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=template&index=0!./collector.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/list/collector/collector.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}