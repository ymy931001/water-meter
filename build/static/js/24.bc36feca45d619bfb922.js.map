{"version":3,"sources":["webpack:///src/components/equipErr/equipErr.vue","webpack:///./src/components/equipErr/equipErr.vue?73f5","webpack:///./src/components/equipErr/equipErr.vue"],"names":["equipErr","value","BScroll","refresh","default","_this","this","type","then","res","deviceNumber","alarmTime","exception","list","_this2","_ref","date","val","multipleSelection","selected","_this3","$https","spread","a","b","c","errWrapper","_this4","equipErr_equipErr","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","directives","name","rawName","expression","staticStyle","color","on","click","confirm","_v","ref","width","size","border","stripe","header-row-class-name","row-class-name","data","tableData","selection-change","handleSelectionChange","fixed","filters","filter-method","filterType","prop","label","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"sJAwDeA,0DAMf,+EACA,iBACA,SACA,YACA,6FAQAC,gCAIAC,MAUAC,iEARAC,qCAGA,qEASA,IAAAC,EAAAC,wFAEAC,UACA,WACA,cACA,mBAEA,oCACA,GAAAC,KAAA,SAAAC,8BAEA,+GAGA,cACAC,yBACAC,sBAGAC,uCAGAC,2BAIA,IAAAC,EAAAR,sDAEA,sBACA,OAFAE,KAAA,SAAAO,GAIA,IAAAd,EAAAc,EAAAd,6GAGAe,cAEAf,mBAEA,oCACA,GAAAO,KAAA,SAAAC,eAEAA,kIAKA,yBAMA,kBAEA,2BAGA,gBAEA,2FAcAQ,kEAGAC,mCACAC,oDAIA,IAAAC,EAAAd,gBACA,yEACA,KAAAE,KAAAF,KAAAe,OAAAC,OAAA,SAAAC,EAAAC,EAAAC,WAEA,gEAIAC,oCAGA,IAAAC,EAAArB,4EACA,KAAAE,KAAAF,KAAAe,OAAAC,OAAA,SAAAC,EAAAC,EAAAC,WAEA,gEAIAC,gBC3LeE,GADEC,OAFjB,WAA0B,IAAAC,EAAAxB,KAAayB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOC,GAAA,cAAiBH,EAAA,OAAYI,YAAA,UAAoBJ,EAAA,UAAAA,EAAA,aAA+BK,aAAaC,KAAA,OAAAC,QAAA,SAAAvC,MAAA6B,EAAA,QAAAW,WAAA,YAAsEC,aAAeC,MAAA,WAAkBR,OAAQ5B,KAAA,QAAcqC,IAAKC,MAAAf,EAAAgB,WAAqBhB,EAAAiB,GAAA,cAAAjB,EAAAiB,GAAA,KAAAd,EAAA,OAA6Ce,IAAA,aAAAX,YAAA,WAAsCJ,EAAA,YAAiBK,aAAaC,KAAA,UAAAC,QAAA,YAAAvC,MAAA6B,EAAA,KAAAW,WAAA,SAAsEJ,YAAA,eAAAK,aAA0CO,MAAA,QAAed,OAAQe,KAAA,OAAAC,OAAA,GAAAC,OAAA,GAAAC,wBAAA,YAAAC,iBAAA,aAAAC,KAAAzB,EAAA0B,WAA6HZ,IAAKa,mBAAA3B,EAAA4B,yBAA8CzB,EAAA,mBAAwBE,OAAO5B,KAAA,YAAAoD,MAAA,OAAAV,MAAA,QAAgDnB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCE,OAAOyB,QAAA9B,EAAA8B,QAAAC,gBAAA/B,EAAAgC,WAAAC,KAAA,OAAAC,MAAA,OAAAf,MAAA,QAAgGnB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCE,OAAO4B,KAAA,OAAAC,MAAA,OAAAf,MAAA,QAA2CnB,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCE,OAAO4B,KAAA,YAAAC,MAAA,UAAmClC,EAAAiB,GAAA,KAAAd,EAAA,mBAAoCE,OAAO4B,KAAA,YAAAC,MAAA,WAAmC,YAExsCC,oBCCjB,IAaAC,EAbyBC,EAAQ,OAajCC,CACEpE,EACA4B,GATF,EATA,SAAAyC,GACEF,EAAQ,SAYV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/24.bc36feca45d619bfb922.js","sourcesContent":["<template>\r\n  <div id=\"equipErr\">\r\n    <div class=\"block\" >\r\n        <header>\r\n            <!-- <el-button type=\"text\">批量处理</el-button> -->\r\n            <el-button style=\"color:#67c23a\" type=\"text\" @click=\"confirm\" v-show=\"conFirm\">维修确认</el-button>\r\n        </header>\r\n        <div class=\"cloWra\" ref=\"errWrapper\">\r\n            <el-table\r\n                class=\"searchResult\"\r\n                size=\"mini\"\r\n                border\r\n                stripe\r\n                v-loading=\"load\"\r\n                @selection-change=\"handleSelectionChange\"\r\n                header-row-class-name=\"equipHead\"\r\n                row-class-name=\"equipTabel\"\r\n                :data=\"tableData\"\r\n                style=\"width: 100%\">\r\n                <el-table-column\r\n                type=\"selection\"\r\n                fixed=\"left\"\r\n                width=\"45\">\r\n                </el-table-column>\r\n                <el-table-column \r\n                    :filters=\"filters\"\r\n                    :filter-method=\"filterType\"\r\n                    prop=\"type\"\r\n                    label=\"设备类型\"\r\n                    width=\"85\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"date\"\r\n                    label=\"设备编号\"\r\n                    width=\"95\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"alarmTime\"\r\n                    label=\"报警时间\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"exception\"\r\n                    label=\"异常原因\"\r\n                    >\r\n                </el-table-column>\r\n                \r\n            </el-table>\r\n        </div>\r\n    </div>\r\n                \r\n      \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  components:{},\r\n  props:{},\r\n  data(){\r\n    return {\r\n    conFirm:false,\r\n    filters:[{text: '水表', value: '水表'},{text: '无线单表', value: '无线单表'},{text: '采集器', value: '采集器'}],\r\n    selected:'',\r\n    load:false,\r\n    errScroll:null,\r\n    tableData: []\r\n    }\r\n  },\r\n  watch:{},\r\n  computed:{},\r\n  methods:{\r\n        filterType(value,row,column){\r\n            return row.type === value;\r\n        },\r\n        initScroll(Obj,SCobj){\r\n            if( !Obj ){\r\n                var BScroll\r\n                import('better-scroll').then(res=>{\r\n                    BScroll = res.default\r\n                    Obj = new BScroll(SCobj,{\r\n                    eventPassthrough:\"horizontal\",\r\n                    })\r\n                    Obj.on('scroll',(pos)=>{\r\n                    })\r\n                })\r\n            }else{\r\n                Obj.refresh() \r\n            }\r\n        },\r\n        searchdata(type){\r\n            \r\n            return this.$http.get('/weiXin/api/v1/deviceMend/getDeviceExceptions',{\r\n                deviceTypes:type,\r\n                pageNum: 1,\r\n                pageSize: 30,\r\n                searchType:1\r\n            },{\r\n                'Content-Type': 'application/json; charset=UTF-8'\r\n            },true)\r\n            .then(res=>{\r\n                if(res&&res.data.data.length>0){\r\n                    let list = res.data.data.map(val=>{\r\n                        return {\r\n                            type:(val.deviceType==2&&'采集器')||(val.deviceType==3&&'水表')||(val.deviceType==1&&'无线单表'),\r\n                            date:val.deviceNumber,\r\n                            alarmTime:val.alarmTime,\r\n                            exception:val.exception\r\n\r\n                        }\r\n                    })\r\n                    this.tableData=[...list]\r\n\r\n                }\r\n            })\r\n        },\r\n        confirm() {\r\n            this.$prompt('请输入维修信息', '设备维修', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            // inputErrorMessage: '邮箱格式不正确'\r\n        }).then(({ value }) => {\r\n            this.$http.post('/weiXin/api/v1/deviceMend/mendDevice',{\r\n                deviceNumbers:this.selected.map(val=>{\r\n                    return val.date\r\n                }),\r\n                remark:value\r\n            },{\r\n                'Content-Type': 'application/json; charset=UTF-8'\r\n            },true)\r\n            .then(res=>{\r\n                console.log(res)\r\n                if(res.data.code==0){\r\n                    this.selected.forEach((VAL,IND)=>[\r\n                        this.tableData.forEach((val,ind)=>{\r\n                            if(val.date==VAL.date){\r\n                                this.tableData.splice(ind,1)\r\n                            }\r\n                        })\r\n                    ])\r\n                    \r\n                    this.$message({\r\n                    type: 'success',\r\n                    message: '维修成功'\r\n                    });\r\n                }else{\r\n                    this.$message({\r\n                    type: 'error',\r\n                    message: '维修失败'\r\n                    });\r\n                }\r\n                \r\n            })\r\n            \r\n        }).catch(() => {\r\n            // this.$message({\r\n            // type: 'info',\r\n            // message: '取消输入'\r\n            // });       \r\n        });\r\n      },\r\n      handleSelectionChange(val) {\r\n        \r\n        this.multipleSelection = val;\r\n        this.conFirm=this.multipleSelection.length>0?true:false;\r\n        this.selected=this.multipleSelection\r\n \r\n        console.log(this.selected)\r\n      },\r\n  },\r\n  created(){},\r\n  mounted(){\r\n      this.load=true \r\n      this.$https.all([this.searchdata(1),this.searchdata(2),this.searchdata(3)])\r\n        .then(this.$https.spread((a,b,c)=>{\r\n           this.load=false\r\n        }))\r\n        this.$nextTick(()=>{\r\n            this.initScroll(this.errScroll,this.$refs.errWrapper);\r\n\r\n        });\r\n  },\r\n  activated(){\r\n      this.$https.all([this.searchdata(1),this.searchdata(2),this.searchdata(3)])\r\n        .then(this.$https.spread((a,b,c)=>{\r\n           this.load=false\r\n        }))\r\n        this.$nextTick(()=>{\r\n            this.initScroll(this.errScroll,this.$refs.errWrapper);\r\n\r\n        });\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n\t#equipErr{\r\n        background: #fff;\r\n\t\t.el-date-editor{\r\n\t\t\tmargin-top: 20px;\r\n\t\t\twidth: 320px;\r\n\t\t}\r\n\t\t.block{\r\n            header{\r\n                padding: 0 20px 0 20px;\r\n                display: flex;\r\n                justify-content: flex-end;\r\n            }\r\n\t\t\t.idSearch{\r\n\t\t\t\twidth: 320px;\r\n\t\t\t\tmargin-top: 20px;\r\n\t\t\t}\r\n\t\t\t.searchConfirm{\r\n\t\t\t\twidth: 320px;\r\n\t\t\t\tmargin-top: 20px;\r\n\t\t\t}\r\n\t\t\t\r\n            .cloWra{\r\n                height: 67vh;\r\n                overflow: hidden;\r\n                .searchResult{\r\n                    margin:0 0px 50px 0px;\r\n                    min-height:calc(100% + 1px)\r\n                }\r\n\t    \t}   \r\n\t\t}\r\n\t}\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/equipErr/equipErr.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"equipErr\"}},[_c('div',{staticClass:\"block\"},[_c('header',[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.conFirm),expression:\"conFirm\"}],staticStyle:{\"color\":\"#67c23a\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.confirm}},[_vm._v(\"维修确认\")])],1),_vm._v(\" \"),_c('div',{ref:\"errWrapper\",staticClass:\"cloWra\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.load),expression:\"load\"}],staticClass:\"searchResult\",staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"border\":\"\",\"stripe\":\"\",\"header-row-class-name\":\"equipHead\",\"row-class-name\":\"equipTabel\",\"data\":_vm.tableData},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"fixed\":\"left\",\"width\":\"45\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"filters\":_vm.filters,\"filter-method\":_vm.filterType,\"prop\":\"type\",\"label\":\"设备类型\",\"width\":\"85\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"设备编号\",\"width\":\"95\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"alarmTime\",\"label\":\"报警时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"exception\",\"label\":\"异常原因\"}})],1)],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-77619c58\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/equipErr/equipErr.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.0@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-77619c58\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=styles&index=0!./equipErr.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=script&index=0!./equipErr.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-77619c58\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=template&index=0!./equipErr.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/equipErr/equipErr.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}