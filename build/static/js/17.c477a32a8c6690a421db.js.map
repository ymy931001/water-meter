{"version":3,"sources":["webpack:///src/components/list/offline/offlineRecord.vue","webpack:///./src/components/list/offline/offlineRecord.vue?ab70","webpack:///./src/components/list/offline/offlineRecord.vue"],"names":["offlineRecord","Date","end","getRecord","_this","this","deviceId","pageNum","then","res","data","_this2","_this3","refresh","transform","_tableData","arr","finishPullUp","_tableData2","finishPullDown","_this4","recordScroll","offline_offlineRecord","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","font-size","line-height","_v","_s","$route","query","attrs","type","span","ref","editable","format","value-format","popper-class","align","unlink-panels","range-separator","start-placeholder","end-placeholder","picker-options","pickerOptions","model","value","callback","$$v","timechoice","expression","on","click","searchHistory","directives","name","rawName","isDown","size","border","tableData","fixed","prop","label","scopedSlots","_u","key","fn","row","style","color","onlineOffline","isUp","refreshTxt","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/17.c477a32a8c6690a421db.js","sourcesContent":["<template>\n  <div class=\"offlineRecord\">\n      <p style=\"font-size:17px;line-height:30px;\">设备ID:{{$route.query.deviceId}} </p>\n    <el-row  type=\"flex\" class=\"selectTime\"> \n        \n        <el-col :span=\"20\">\n            <el-date-picker\n                v-model=\"timechoice\"\n                :editable=\"false\"\n                format=\"yyyy-MM-dd\"\n                value-format=\"yyyy-MM-dd\"\n                type=\"daterange\"\n                popper-class=\"timeSelect2\"\n                align=\"right\"\n                unlink-panels\n                ref=\"select\"\n                range-separator=\"至\"\n                start-placeholder=\"开始时间\"\n                end-placeholder=\"结束时间\"\n                :picker-options=\"pickerOptions\">\n            </el-date-picker>\n        </el-col>\n        <el-col :span=\"4\">\n            <el-button class=\"search\" @click=\"searchHistory\">查询</el-button>\n        </el-col> \n    </el-row>\n    <div class=\"block\">\n        <div class=\"isDown\" ref=\"isDown\" v-show=\"!isDown\">刷新数据</div>\n\t\t<div v-show=\"isDown\" ref=\"freshing\"><i class=\"el-icon-loading\"></i>刷新中</div>\n        <div class=\"Wrapper\" ref=\"recordScroll\">\n            <div>\n                <el-table\n                    class=\"searchResult\"\n                    size=\"mini\"\n                    border\n                    :data=\"tableData\"\n                    >\n                    <el-table-column\n                        fixed\n                        prop=\"date\"\n                        label=\"读数时间\"\n                        \n                        >\n                    </el-table-column>\n                    <el-table-column\n                        label=\"状态\"\n                        prop=\"reading\"   \n                        >\n                        <template slot-scope={row}>\n                            <span :style=\"{color:row.onlineOffline==1?'green':'#f56c6c'}\">\n                            {{row.onlineOffline==1?'上线':'下线'}}\n\n                            </span>\n                        </template>\n                    </el-table-column>\n                </el-table>\n                <div  ref=\"isUp\" v-if=\"!isUp\">{{refreshTxt}}</div>\n                <div v-else ref=\"download\"><i class=\"el-icon-loading\"></i>加载中</div>\n\n            </div>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst PAGESIZE=15\nimport BScroll from 'better-scroll'\nexport default {\n  components:{},\n  props:{},\n  data(){\n    return {\n        tableData:[],\n        timechoice: '',\n        recordWrapper:null,\n        pageNum:1,\n        isDown:false,\n\t\tisUp:false,\n\t\tisEnd:false,\n        pickerOptions: {\n            shortcuts: [{\n                text: '最近一周',\n                onClick(picker) {\n                    const end = new Date();\n                    const start = new Date();\n                    start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n                    picker.$emit('pick', [start, end]);\n                }\n            }, {\n                text: '最近一个月',\n                onClick(picker) {\n                    const end = new Date();\n                    const start = new Date();\n                    start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n                    picker.$emit('pick', [start, end]);\n                }\n            }, {\n                text: '最近三个月',\n                onClick(picker) {\n                    const end = new Date();\n                    const start = new Date();\n                    start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n                    picker.$emit('pick', [start, end]);\n                }\n            }]\n        },\n    }\n  },\n  watch:{},\n  computed:{\n      refreshTxt:function(){\n        return this.isEnd?'--无更多数据--':'--上拉加载更多--'\n    }\n  },\n  methods:{\n      searchHistory(){\n          this.getRecord()\n      },\n      getRecord(){\n          return new Promise(resolve=>{\n              this.$http.get('/weiXin/api/v1/historyReading/getHistoryOnline',{\n                  deviceNum:this.$route.query.deviceId,\n                  startTime:this.timechoice?this.timechoice[0]:null,\n                  endTime:this.timechoice?this.timechoice[1]:null,\n                  pageNum:this.pageNum,\n                  pageSize:PAGESIZE,\n              })\n              .then(res=>{\n                  if(res){\n                      \n                      resolve(res.data.data)\n                  }\n              })\n\n          })\n      },\n      getListDataFromNet (pageNum,successCallback) {\n\t  // 延时一秒,模拟联网\n\t  \n      setTimeout(() => {\n\t\t\n        this.getRecord(pageNum)\n        .then(res=>{\n            successCallback(res)\n        })\n\t\t\n        \n      }, 1000)\n    },\n      initScroll(Obj,SCobj){\n\n            if( !Obj ){\n                Obj = new BScroll(SCobj,{\n                    eventPassthrough:\"horizontal\",\n\t\t\t\t\tpullUpLoad:{\n\t\t\t\t\tthreshold: -50,\n\t\t\t\t\t},\n\t\t\t\t\tpullDownRefresh:{\n\t\t\t\t\tthreshold: 55,\n\t\t\t\t\ttxt:'刷新'\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tObj.on('scroll',(pos)=>{\n\t\t\t\t\tif(!this.isDown){\n                        if(pos.y>20){\n                            this.$refs.isDown.style.visibility='visible'\n                        }else{\n                            this.$refs.isDown.style.visibility='hidden'\n                        }\n\t\t\t\t\t\tthis.$refs.isDown.style.transform=`translate(0,${pos.y-40}px)`\n\t\t\t\t\t\t\n\t\t\t\t\t}else if(this.isDown){\n\t\t\t\t\t\tthis.$refs.freshing.style.transform=`translate(0,20px)`\n\t\t\t\t\t}else if(this.isUp){\n\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t\tObj.on('pullingUp',()=>{\n\n                    this.isUp=true\n                    this.pageNum++\n                    this.getListDataFromNet(this.pageNum, (arr) => {\n                        if(arr.length==0) this.isEnd=true\n                        this.tableData.push(...arr)\n                        this.isUp=false\n                        Obj.refresh()\n                        Obj.finishPullUp();\n                    })\n\n\t\t\t\t})\n\t\t\t\tObj.on('pullingDown',()=>{\n                    this.isDown=true\n\t\t\t\t\tthis.pageNum=1\n\t\t\t\t\tthis.getListDataFromNet(this.pageNum, (arr) => {\n\t\t\t\t\t\tthis.tableData=[]\n\t\t\t\t\t\tthis.tableData.push(...arr)\n\t\t\t\t\t\tthis.isDown=false\n\t\t\t\t\t\tObj.refresh()\n                        Obj.finishPullDown();\n\t\t\t\t\t\tif(!arr.length>0){\n\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t})\n            }else{\n                Obj.refresh() \n            }\n        },\n  },\n  created(){},\n  mounted(){\n      this.getRecord()\n      .then(res=>{\n          this.tableData=res\n          this.initScroll(this.recordWrapper,this.$refs.recordScroll)\n      })\n  }\n}\n</script>\n<style lang=\"less\">\n.offlineRecord{\n    .selectTime{\n        margin: 0 10px;\n        margin-bottom: 10px;\n        .el-date-editor{\n            width: 300px;\n        }\n        .search{\n        width: 100%;\n        margin-left: 5px;\n        padding: 0;\n        height: 100%;\n        }\n\n    }\n    .block{\n        height: 67vh;\n        text-align: center;\n        .isDown{\n            visibility: hidden;\n            transform:translate(0,-40px)\n        }\n        .Wrapper{\n            height: 100%;\n            overflow: hidden;\n            >div{\n                min-height: calc(100% + 1px)\n\n            }\n        }\n        .searchResult{\n            \n        }\n    }\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/list/offline/offlineRecord.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"offlineRecord\"},[_c('p',{staticStyle:{\"font-size\":\"17px\",\"line-height\":\"30px\"}},[_vm._v(\"设备ID:\"+_vm._s(_vm.$route.query.deviceId)+\" \")]),_vm._v(\" \"),_c('el-row',{staticClass:\"selectTime\",attrs:{\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-date-picker',{ref:\"select\",attrs:{\"editable\":false,\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"type\":\"daterange\",\"popper-class\":\"timeSelect2\",\"align\":\"right\",\"unlink-panels\":\"\",\"range-separator\":\"至\",\"start-placeholder\":\"开始时间\",\"end-placeholder\":\"结束时间\",\"picker-options\":_vm.pickerOptions},model:{value:(_vm.timechoice),callback:function ($$v) {_vm.timechoice=$$v},expression:\"timechoice\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{staticClass:\"search\",on:{\"click\":_vm.searchHistory}},[_vm._v(\"查询\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"block\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isDown),expression:\"!isDown\"}],ref:\"isDown\",staticClass:\"isDown\"},[_vm._v(\"刷新数据\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDown),expression:\"isDown\"}],ref:\"freshing\"},[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\"刷新中\")]),_vm._v(\" \"),_c('div',{ref:\"recordScroll\",staticClass:\"Wrapper\"},[_c('div',[_c('el-table',{staticClass:\"searchResult\",attrs:{\"size\":\"mini\",\"border\":\"\",\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"fixed\":\"\",\"prop\":\"date\",\"label\":\"读数时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\",\"prop\":\"reading\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',{style:({color:row.onlineOffline==1?'green':'#f56c6c'})},[_vm._v(\"\\n                            \"+_vm._s(row.onlineOffline==1?'上线':'下线')+\"\\n\\n                            \")])]}}])})],1),_vm._v(\" \"),(!_vm.isUp)?_c('div',{ref:\"isUp\"},[_vm._v(_vm._s(_vm.refreshTxt))]):_c('div',{ref:\"download\"},[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\"加载中\")])],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5244e7ea\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/list/offline/offlineRecord.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5244e7ea\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./offlineRecord.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./offlineRecord.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5244e7ea\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./offlineRecord.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/list/offline/offlineRecord.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}